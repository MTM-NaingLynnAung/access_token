<%= form_with url: url, method: :put, local: true do |form| %>

  <div class="col-3 my-3">
    <%= form.label 'Label' %>
    <%= form.text_field :label, class: "form-control", value: @external_service.linkage_system.label %>
  </div>

  <% @external_service.external_service_parameters.each do |current_value| %>
    <% if current_value.external_service_parameter_definition.is_displayed != 0 %>

      <div class="col-3 my-3">
        <%= form.label "#{current_value.external_service_parameter_definition.name}" %>
        <%= form.text_field current_value.external_service_parameter_definition.id, class: "form-control", value: current_value.external_service_parameter_definition.is_encrypted == 0 ? current_value.parameter_value : crypt.decrypt_and_verify(current_value.parameter_value) %>
      </div>
    <% end %>
  <% end %>

<%= link_to 'Back', linkage_system_path(definition: params[:definition]), class: 'btn btn-dark me-2' %>
<%= form.submit 'Confirm', class: 'btn btn-primary' %>

<% end %>
